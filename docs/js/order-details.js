const urlParams=new URLSearchParams(window.location.search),backendUrl="https://api.accbuddy.com/public",email=urlParams.get("email"),orderID="orderID-"+urlParams.get("orderId"),accessToken=getAccessToken();let order=fetchOrderById(),product=order.then(e=>fetchProductById("productID-"+e.orderProductID));const link=generateOrderLink().catch(e=>{});function formatDate(e){return new Date(1e3*e).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}function getAccessToken(){var e=localStorage.getItem("AuthenticationResult");if(e)return JSON.parse(e).AccessToken}async function fetchOrderById(){var e={getOrder:{orderID:orderID,email:email}},t=new Headers;return accessToken&&t.set("Authorization",accessToken),fetch(backendUrl,{method:"POST",headers:t,body:JSON.stringify(e)}).then(e=>e.json()).then(e=>e.result)}async function generateOrderLink(){var e={generateOrderLink:{orderID:orderID,email:email}},t=new Headers;return accessToken&&t.set("Authorization",accessToken),fetch(backendUrl,{method:"POST",headers:t,body:JSON.stringify(e)}).then(e=>{var t;if(e.ok)return e.json();throw(t=new Error("HTTP status code: "+e.status)).response=e,t.status=e.status,t}).then(e=>e.result)}async function fetchProductById(e){console.log(e);e={fetchProductByID:{productID:e}};return fetch(backendUrl,{method:"POST",body:JSON.stringify(e)}).then(e=>e.json()).then(e=>e.result)}function showSideBar(){var t=document.querySelectorAll(".ab-main--sidebar-content ul.account-info-items");for(let e=0;e<t.length;e++)t[e].style.display="block";document.getElementById("auth-button").style.display="flex"}document.addEventListener("DOMContentLoaded",async function(){order=await order,product=await product,accessToken&&showSideBar();var e=document.getElementById("productName"),t=document.getElementById("productImage"),r=(await new Promise(e=>setTimeout(e,100)),document.getElementById("productDescription")),e=(e.textContent=product.productName,t.src=product.productImageUrl,r.textContent=product.productDescr,document.querySelector(".ab-quantity-number")),t=document.querySelector(".ab-order-price"),r=document.querySelector(".ab-note-desc"),o=document.getElementById("discount"),o=(document.getElementById("total").textContent="$"+order.totalPaid,o.textContent="-$"+order.orderDiscount,r.textContent=product.productWarning,e.textContent=order.productsOrdered,t.textContent="$"+product.productPrice,document.querySelector(".ab-order-info-desc")),r=o.parentElement.nextElementSibling.querySelector(".ab-order-info-desc"),e=r.parentElement.nextElementSibling.querySelector(".ab-order-info-desc"),t=(o.textContent="â„– "+order.PK.replace("orderID-",""),r.textContent=formatDate(order.orderTimestamp),e.textContent=order.orderPublicStatus,(await link)?.text),o=(console.log("text:"+t),t&&(document.querySelector(".ab-account-info-list").innerHTML=t,document.getElementById("accounts-box").style.display="block"),document.querySelector(".ab-preloader-screen"));o&&o.parentNode.removeChild(o)});