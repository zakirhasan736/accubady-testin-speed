document.addEventListener("DOMContentLoaded",function(){function e(){let t=!1;function r(){var e;t||((e=document.createElement("script")).src="https://www.google.com/recaptcha/api.js",e.async=!0,e.defer=!0,document.head.appendChild(e),t=!0)}var e=document.querySelector("#footer-form");[e.querySelector("#name"),e.querySelector("#email"),e.querySelector("#text"),e.querySelector("#checkedRequered")].forEach(function(e){e.addEventListener("focus",r)})}e(),console.log(" recaptcha.js loaded");const s=document.querySelector("#footer-form"),o={name:!1,email:!1,text:!1,checkbox:!1};var a=!1;const d=s.querySelector("#submit"),t=s.querySelector("#name"),r=s.querySelector("#email"),n=s.querySelector("#text"),c=s.querySelector("#checkedRequered");function i(e,t,r){if(!e)throw new Error("Input parameter is undefined");e.addEventListener("focus",e=>{t(e)}),e.addEventListener("blur",e=>{r()})}function l(){let e=!0;for(var t in o)if(!1===o[t]){e=!1;break}a=e}function u(e,t){o[e]=t,l(),!0===t&&a&&(d.disabled=!1)}function y(e){e=e.target.parentNode;e&&e.classList.remove("warning")}function m(){var e=s.querySelector("#name"),t=0<e.value.trim().length,e=e.parentNode;!t&&e?(e.classList.add("warning"),u("name",!1)):u("name",!0)}function p(){var e=s.querySelector("#email"),t=e.value,t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),e=e.parentNode;!t&&e?(e.classList.add("warning"),u("email",!1)):u("email",!0)}function q(){var e=s.querySelector("#text"),t=e.value.trim().length,e=e.parentNode;!(10<=t&&t<=1e3)&&e?(e.classList.add("warning"),u("text",!1)):u("text",!0)}function v(){var e=s.querySelector(".ab-check-requred"),t=s.querySelector("#checkedRequered");u("checkbox",t.checked),!t.checked&&e?(e.classList.add("warning"),s.querySelector("#checkbox-text").innerText="In order to submit your message, you need to accept our privacy policy and terms of conditions"):(t=s.querySelector("#checkbox-text"),(e=s.querySelector(".ab-check-requred"))&&(e.classList.remove("warning"),t.innerText="I have read and agree to the Privacy Policy and Terms of Service"),l())}i(t,y,m),i(r,y,p),i(n,y,q),c.addEventListener("change",e=>{v(e.target)}),window.onSubmit=async function(o){const[a,n,c]=Array.from(["name","email","text"]).map(e=>document.getElementById(e).value),e=s.querySelector("#submit");e.innerHTML="sending",d.disabled=!0;var t,r,i,l=await(async()=>{var e={message:"",errorMessage:null,status:null},t=await fetch("https://api.accbuddy.com/public",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sendMessage:{token:o,name:a,email:n,message:c}})}),r=await t.json();if(t.ok||400!=t.status){if(t.ok){const o=r.result;e.message=o}}else{const o=r.error;e.status=t.status,e.errorMessage=o}return e})();e.innerHTML="send",null!==l.errorMessage?(t=l.errorMessage,r=document.querySelector("#footer-error-plank"),i=r.querySelector(".plank"),r.classList.remove("hidden"),i.innerHTML=t):(r=l.message,document.querySelector("#footer-error-plank").classList.add("hidden"),i=s.querySelector(".ab-form-input-box"),(t=document.createElement("div")).className="ui-response",t.style="height: 141px; min-width: 100% !important; padding: 35px 44.91px;padding-top: 10.15px;padding-right: 10.1px; border: 1px solid var(--ab_violet)",t.innerHTML="<img id='footer-img-close' style='display: block;margin-left: auto;' class='' src='image/close.svg' alt='close_icon'><span style='font-family: var(--ab_primary-font);font-style:normal;font-weight: 800;font-size: 16px;line-height:20px;letter-spacing:-0.5px;color: var(--ab_violet);'><object data='image/checkmark.svg'></object> Thank you</span ><p class='p' style='margin-top: 18.58px; color: var(--ab_violet)'>"+r+"</p>",i.insertBefore(t,i.firstChild),i.querySelector("#footer-img-close").addEventListener("click",()=>{var e,t;e=s.querySelector(".ab-form-input-box"),t=s.querySelector(".ui-response"),e.classList.remove("ab-form-input-box-success"),e.removeChild(t),s.querySelector("#name").parentNode.style.display="block",s.querySelector("#name").value="",s.querySelector("#email").parentNode.style.display="block",s.querySelector("#email").value="",s.querySelector("#text").parentNode.style.display="block",s.querySelector("#text").value="",s.querySelector("#label-checkbox").parentNode.style.visibility="visible",s.querySelector("#submit").parentNode.style.visibility="visible",s.querySelector("#checkedRequered").checked=!1,grecaptcha.reset()}),i.classList.add("ab-form-input-box-success"),s.querySelector("#name").parentNode.style.display="none",s.querySelector("#email").parentNode.style.display="none",s.querySelector("#text").parentNode.style.display="none",s.querySelector("#label-checkbox").parentNode.style.visibility="hidden",s.querySelector("#submit").parentNode.style.visibility="hidden",s.querySelector("#checkedRequered").checked=!1),d.disabled=!1},s.querySelector("#error-plank-close").addEventListener("click",()=>{document.querySelector("#footer-error-plank").classList.add("hidden"),grecaptcha?grecaptcha.reset():console.log("grecaptcha undefined")}),s.querySelector("#submit").onclick=function(e){var t,r;e.preventDefault(),l(),a?grecaptcha.execute():([e,t,r]=[s.querySelector("#name"),s.querySelector("#email"),s.querySelector("#text")],e.addEventListener("input",e=>{m(),o.name&&y(e)}),t.addEventListener("input",e=>{p(),o.email&&y(e)}),r.addEventListener("input",e=>{q(),o.text&&y(e)}),m(),p(),q(),v(),d.disabled=!0)}});